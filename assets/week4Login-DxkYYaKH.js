import{u as I,b as q,r as l,c as d,a as e,w as a,v as n,d as L,e as b,t as B,f as y,o as c}from"./index-D0_HHsCF.js";const D={class:"conatiner loginPage"},E=e("div",{class:"side"},[e("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""}),e("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),N={key:0},P={class:"formControls",action:"index.html"},M=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),T=e("label",{class:"formControls_label",for:"email"},"Email",-1),$={key:0},j=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1),z={key:1},A={class:"formControls",action:"index.html"},F=e("h2",{class:"formControls_txt"},"註冊帳號",-1),G=e("label",{class:"formControls_label",for:"email"},"Email",-1),H=e("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),J=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1),K=e("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1),R={__name:"week4Login",setup(O){const p=I(),k=q(),h=p.Url,i=l(!0),_=l("smart@gmail.com"),u=l("smartsmart"),v=l("smartsmart"),r=l(""),f=l("smart"),w=l(""),C=()=>{i.value=!i.value},x=()=>{u.value!=v.value?r.value="密碼輸入不一致":r.value=""},U=async()=>{if(r.value=="")try{const s=await y.post(`${h}/users/sign_up`,{email:_.value,password:u.value,nickname:f.value});w.value="註冊成功. UID: "+s.data.uid,S(w)}catch(s){r.value=s.response.data.message}},S=s=>{alert("註冊成功",s.value),i.value=!0},m=l("smart@gmail.com"),g=l("smartsmart"),V=async()=>{try{const s=await y.post(`${h}/users/sign_in`,{email:m.value,password:g.value});p.setToken(s.data.token),p.setName(s.data.nickname),k.todoList()}catch(s){alert(s.response.data.message)}};return(s,o)=>(c(),d("div",D,[E,i.value?(c(),d("div",N,[e("form",P,[M,T,a(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>m.value=t),class:"formControls_input",type:"text",id:"email",placeholder:"請輸入 email",required:""},null,512),[[n,m.value]]),m.value?L("",!0):(c(),d("span",$,"此欄位不可留空")),j,a(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>g.value=t),class:"formControls_input",type:"password",id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[n,g.value]]),e("button",{onClick:V,class:"formControls_btnSubmit",type:"button"},"登入"),e("a",{onClick:b(C,["prevent"]),class:"formControls_btnLink",href:"#"},"註冊帳號")])])):(c(),d("div",z,[e("form",A,[F,G,a(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>_.value=t),class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:""},null,512),[[n,_.value]]),H,a(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>f.value=t),class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱"},null,512),[[n,f.value]]),J,a(e("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>u.value=t),class:"formControls_input",type:"password",id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[n,u.value]]),K,a(e("input",{onChange:x,"onUpdate:modelValue":o[5]||(o[5]=t=>v.value=t),class:"formControls_input",type:"password",id:"pwd2",placeholder:"請再次輸入密碼",required:""},null,544),[[n,v.value]]),e("span",null,B(r.value),1),e("input",{onClick:U,class:"formControls_btnSubmit",type:"button",value:"註冊帳號"}),e("a",{onClick:b(C,["prevent"]),class:"formControls_btnLink",href:"#"},"登入")])]))]))}};export{R as default};
