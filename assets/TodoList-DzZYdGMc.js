import{_ as S,u as U,b as V,g as D,r as h,h as F,f as p,c as l,a as s,w as b,v as P,e as c,n as y,F as j,i as q,t as w,o as n,j as A,p as N,k as G}from"./index-D0_HHsCF.js";const H=_=>(N("data-v-db5ec015"),_=_(),G(),_),J={id:"todoListPage",class:"bg-half"},K={class:"conatiner todoListPage vhContainer"},O={class:"todoList_Content"},Q={class:"inputBox"},R=H(()=>s("i",{class:"fa fa-plus"},null,-1)),W=[R],X={key:0},Y={key:1,class:"todoList_list"},Z={class:"todoList_tab"},tt={class:"todoList_items"},et={class:"todoList_item"},st={class:"todoList_label"},ot=["onUpdate:modelValue","onClick"],at={key:0},lt=["value","onChange"],nt=["onClick"],it=["onClick"],dt=["onClick"],ct={class:"todoList_statistics"},ut={__name:"TodoList",setup(_){const m=U(),T=V(),u=m.Url,d=m.token;D(()=>{d?C():T.week4()});const r=h("all"),g=t=>{r.value=t},i=h([]),v=h({}),f=h(""),k=h(""),x=F(()=>{switch(r.value){case"pending":return i.value.filter(t=>!t.status);case"completed":return i.value.filter(t=>t.status);case"all":default:return i.value}}),C=async()=>{const t=await p.get(`${u}/todos`,{headers:{authorization:d}});i.value=t.data.data,i.value.forEach(e=>{e.edit=!1}),$()},$=()=>{i.value.length===0?k.value="":k.value=`${i.value.filter(t=>!t.status).length} 個未完成項目`},z=async()=>{try{await p.post(`${u}/todos`,{content:f.value},{headers:{authorization:d}}),C(),f.value=""}catch(t){console.log(t.data)}},B=async t=>{try{await p.delete(`${u}/todos/${t}`,{headers:{authorization:d}}),C()}catch(e){console.log(e.data)}},L=t=>{const e=i.value.find(o=>o.id===t);e.edit=!e.edit,!e.edit&&t in v.value&&v.value[t]!=e.content&&E(t)},E=async t=>{try{await p.put(`${u}/todos/${t}`,{content:v.value[t]},{headers:{authorization:d}}),C()}catch(e){console.log(e.data)}},I=(t,e)=>{v.value={...v.value,[e]:t.target.value}},M=async t=>{try{await p.patch(`${u}/todos/${t}/toggle`,{},{headers:{authorization:d}}),$()}catch(e){console.log(e.data)}};return(t,e)=>(n(),l("div",J,[s("div",K,[s("div",O,[s("div",Q,[b(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),type:"text",placeholder:"請輸入待辦事項"},null,512),[[P,f.value]]),s("a",{onClick:[z,e[1]||(e[1]=c((...o)=>t.handleClick&&t.handleClick(...o),["prevent"]))],href:"#"},W)]),k.value===""?(n(),l("div",X,"目前尚無待辦事項")):(n(),l("div",Y,[s("ul",Z,[s("li",null,[s("a",{href:"#",class:y({active:r.value==="all"}),onClick:e[2]||(e[2]=c(o=>g("all"),["prevent"]))},"全部",2)]),s("li",null,[s("a",{href:"#",class:y({active:r.value==="pending"}),onClick:e[3]||(e[3]=c(o=>g("pending"),["prevent"]))},"待完成",2)]),s("li",null,[s("a",{href:"#",class:y({active:r.value==="completed"}),onClick:e[4]||(e[4]=c(o=>g("completed"),["prevent"]))},"已完成",2)])]),s("div",tt,[s("ul",et,[(n(!0),l(j,null,q(x.value,o=>(n(),l("li",{key:o.id},[s("label",st,[b(s("input",{"onUpdate:modelValue":a=>o.status=a,class:"todoList_input",type:"checkbox",onClick:a=>M(o.id)},null,8,ot),[[A,o.status]]),o.edit?(n(),l("input",{key:1,value:o.content,onChange:a=>I(a,o.id)},null,40,lt)):(n(),l("span",at,w(o.content),1))]),s("a",{href:"#",onClick:e[5]||(e[5]=c((...a)=>t.handleClick&&t.handleClick(...a),["prevent"]))},[o.edit?(n(),l("i",{key:1,onClick:a=>L(o.id),class:"fa-solid fa-check fa-2x"},null,8,it)):(n(),l("i",{key:0,onClick:a=>L(o.id),class:"fa-solid fa-pen-to-square fa-2x"},null,8,nt))]),s("a",{href:"#",onClick:e[6]||(e[6]=c((...a)=>t.handleClick&&t.handleClick(...a),["prevent"]))},[s("i",{onClick:a=>B(o.id),class:"fa fa-times fa-2x"},null,8,dt)])]))),128))]),s("div",ct,[s("p",null,w(k.value),1)])])]))])])]))}},vt=S(ut,[["__scopeId","data-v-db5ec015"]]);export{vt as default};
