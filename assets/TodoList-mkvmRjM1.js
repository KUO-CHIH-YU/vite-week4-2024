import{_ as S,u as U,b as V,g as D,r as h,h as F,f as p,c as l,a as s,w as b,v as P,e as c,n as g,F as j,i as q,t as w,o as i,j as A,p as N,k as G}from"./index-2-jo-swZ.js";const H=_=>(N("data-v-2b607d7d"),_=_(),G(),_),J={id:"todoListPage",class:"bg-half"},K={class:"conatiner todoListPage vhContainer"},O={class:"todoList_Content"},Q={class:"inputBox"},R=H(()=>s("i",{class:"fa fa-plus"},null,-1)),W=[R],X={class:"todoList_list"},Y={class:"todoList_tab"},Z={class:"todoList_items"},tt={class:"todoList_item"},et={class:"todoList_label"},st=["onUpdate:modelValue","onClick"],ot={key:0},at=["value","onChange"],nt=["onClick"],lt=["onClick"],it=["onClick"],dt={class:"todoList_statistics"},ct={__name:"TodoList",setup(_){const m=U(),T=V(),u=m.Url,d=m.token;D(()=>{d?k():T.week4()});const r=h("all"),C=t=>{r.value=t},n=h([]),v=h({}),f=h(""),y=h(""),x=F(()=>{switch(r.value){case"pending":return n.value.filter(t=>!t.status);case"completed":return n.value.filter(t=>t.status);case"all":default:return n.value}}),k=async()=>{const t=await p.get(`${u}/todos`,{headers:{authorization:d}});n.value=t.data.data,n.value.forEach(e=>{e.edit=!1}),$()},$=()=>{y.value=`${n.value.filter(t=>!t.status).length} 個未完成項目，
  ${n.value.filter(t=>t.status).length} 個已完成項目`},z=async()=>{try{await p.post(`${u}/todos`,{content:f.value},{headers:{authorization:d}}),k(),f.value=""}catch(t){console.log(t.data)}},B=async t=>{try{await p.delete(`${u}/todos/${t}`,{headers:{authorization:d}}),k()}catch(e){console.log(e.data)}},L=t=>{const e=n.value.find(o=>o.id===t);e.edit=!e.edit,!e.edit&&t in v.value&&v.value[t]!=e.content&&E(t)},E=async t=>{try{await p.put(`${u}/todos/${t}`,{content:v.value[t]},{headers:{authorization:d}}),k()}catch(e){console.log(e.data)}},I=(t,e)=>{v.value={...v.value,[e]:t.target.value}},M=async t=>{try{await p.patch(`${u}/todos/${t}/toggle`,{},{headers:{authorization:d}}),$()}catch(e){console.log(e.data)}};return(t,e)=>(i(),l("div",J,[s("div",K,[s("div",O,[s("div",Q,[b(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),type:"text",placeholder:"請輸入待辦事項"},null,512),[[P,f.value]]),s("a",{onClick:[z,e[1]||(e[1]=c((...o)=>t.handleClick&&t.handleClick(...o),["prevent"]))],href:"#"},W)]),s("div",X,[s("ul",Y,[s("li",null,[s("a",{href:"#",class:g({active:r.value==="all"}),onClick:e[2]||(e[2]=c(o=>C("all"),["prevent"]))},"全部",2)]),s("li",null,[s("a",{href:"#",class:g({active:r.value==="pending"}),onClick:e[3]||(e[3]=c(o=>C("pending"),["prevent"]))},"待完成",2)]),s("li",null,[s("a",{href:"#",class:g({active:r.value==="completed"}),onClick:e[4]||(e[4]=c(o=>C("completed"),["prevent"]))},"已完成",2)])]),s("div",Z,[s("ul",tt,[(i(!0),l(j,null,q(x.value,o=>(i(),l("li",{key:o.id},[s("label",et,[b(s("input",{"onUpdate:modelValue":a=>o.status=a,class:"todoList_input",type:"checkbox",onClick:a=>M(o.id)},null,8,st),[[A,o.status]]),o.edit?(i(),l("input",{key:1,value:o.content,onChange:a=>I(a,o.id)},null,40,at)):(i(),l("span",ot,w(o.content),1))]),s("a",{href:"#",onClick:e[5]||(e[5]=c((...a)=>t.handleClick&&t.handleClick(...a),["prevent"]))},[o.edit?(i(),l("i",{key:1,onClick:a=>L(o.id),class:"fa-solid fa-check fa-2x"},null,8,lt)):(i(),l("i",{key:0,onClick:a=>L(o.id),class:"fa-solid fa-pen-to-square fa-2x"},null,8,nt))]),s("a",{href:"#",onClick:e[6]||(e[6]=c((...a)=>t.handleClick&&t.handleClick(...a),["prevent"]))},[s("i",{onClick:a=>B(o.id),class:"fa fa-times fa-2x"},null,8,it)])]))),128))]),s("div",dt,[s("p",null,w(y.value),1)])])])])])]))}},rt=S(ct,[["__scopeId","data-v-2b607d7d"]]);export{rt as default};
