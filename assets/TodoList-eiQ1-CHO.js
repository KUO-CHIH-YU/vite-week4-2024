import{_ as S,u as U,b as V,f as D,r as v,g as F,e as _,c as l,a as s,w as x,v as P,n as k,h as C,F as j,i as q,t as w,o as i,j as A,p as N,k as G}from"./index-CFJcvoKQ.js";const H=h=>(N("data-v-7e2016ca"),h=h(),G(),h),J={id:"todoListPage",class:"bg-half"},K={class:"conatiner todoListPage vhContainer"},O={class:"todoList_Content"},Q={class:"inputBox"},R=H(()=>s("i",{class:"fa fa-plus"},null,-1)),W=[R],X={class:"todoList_list"},Y={class:"todoList_tab"},Z={class:"todoList_items"},tt={class:"todoList_item"},et={class:"todoList_label"},st=["onUpdate:modelValue","onClick"],ot={key:0},at=["value","onChange"],nt={href:"#"},lt=["onClick"],it=["onClick"],ct={href:"#"},dt=["onClick"],ut={class:"todoList_statistics"},rt={__name:"TodoList",setup(h){const m=U(),b=V(),d=m.Url,c=m.token;D(()=>{c?f():b.week4()});const u=v("all"),g=t=>{u.value=t},a=v([]),r=v({}),p=v(""),y=v(""),T=F(()=>{switch(u.value){case"pending":return a.value.filter(t=>!t.status);case"completed":return a.value.filter(t=>t.status);case"all":default:return a.value}}),f=async()=>{const t=await _.get(`${d}/todos`,{headers:{authorization:c}});a.value=t.data.data,a.value.forEach(e=>{e.edit=!1}),$()},$=()=>{y.value=`${a.value.filter(t=>!t.status).length} 個未完成項目，
  ${a.value.filter(t=>t.status).length} 個已完成項目`},z=async()=>{try{await _.post(`${d}/todos`,{content:p.value},{headers:{authorization:c}}),f(),p.value=""}catch(t){console.log(t.data)}},B=async t=>{try{await _.delete(`${d}/todos/${t}`,{headers:{authorization:c}}),f()}catch(e){console.log(e.data)}},L=t=>{const e=a.value.find(o=>o.id===t);e.edit=!e.edit,!e.edit&&t in r.value&&r.value[t]!=e.content&&E(t)},E=async t=>{try{await _.put(`${d}/todos/${t}`,{content:r.value[t]},{headers:{authorization:c}}),f()}catch(e){console.log(e.data)}},I=(t,e)=>{r.value={...r.value,[e]:t.target.value}},M=async t=>{try{await _.patch(`${d}/todos/${t}/toggle`,{},{headers:{authorization:c}}),$()}catch(e){console.log(e.data)}};return(t,e)=>(i(),l("div",J,[s("div",K,[s("div",O,[s("div",Q,[x(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o),type:"text",placeholder:"請輸入待辦事項"},null,512),[[P,p.value]]),s("a",{onClick:z,href:"#"},W)]),s("div",X,[s("ul",Y,[s("li",null,[s("a",{href:"#",class:k({active:u.value==="all"}),onClick:e[1]||(e[1]=C(o=>g("all"),["prevent"]))},"全部",2)]),s("li",null,[s("a",{href:"#",class:k({active:u.value==="pending"}),onClick:e[2]||(e[2]=C(o=>g("pending"),["prevent"]))},"待完成",2)]),s("li",null,[s("a",{href:"#",class:k({active:u.value==="completed"}),onClick:e[3]||(e[3]=C(o=>g("completed"),["prevent"]))},"已完成",2)])]),s("div",Z,[s("ul",tt,[(i(!0),l(j,null,q(T.value,o=>(i(),l("li",{key:o.id},[s("label",et,[x(s("input",{"onUpdate:modelValue":n=>o.status=n,class:"todoList_input",type:"checkbox",onClick:n=>M(o.id)},null,8,st),[[A,o.status]]),o.edit?(i(),l("input",{key:1,value:o.content,onChange:n=>I(n,o.id)},null,40,at)):(i(),l("span",ot,w(o.content),1))]),s("a",nt,[o.edit?(i(),l("i",{key:1,onClick:n=>L(o.id),class:"fa-solid fa-check fa-2x"},null,8,it)):(i(),l("i",{key:0,onClick:n=>L(o.id),class:"fa-solid fa-pen-to-square fa-2x"},null,8,lt))]),s("a",ct,[s("i",{onClick:n=>B(o.id),class:"fa fa-times fa-2x"},null,8,dt)])]))),128))]),s("div",ut,[s("p",null,w(y.value),1)])])])])])]))}},_t=S(rt,[["__scopeId","data-v-7e2016ca"]]);export{_t as default};
